{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Scene\\Play/assets\\Script\\Scene\\Play\\Card0.js"],"names":["BaseCard","require","TIME","cc","Class","extends","properties","buttonCard","Button","spriteFrameOns","default","type","SpriteFrame","start","_spriteCard","getComponent","Sprite","_spriteFrameOff","spriteFrame","click","isLock","cardOpen","node","runAction","sequence","delayTime","callFunc","index","end","close","interactable","scaleTo","open","fadeOut","destroy","callBackEnd"],"mappings":"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","file":"Card0.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Scene\\Play","sourcesContent":["var BaseCard = require('BaseCard');\r\nvar TIME = 0.1;\r\ncc.Class({\r\n    extends: BaseCard,\r\n\r\n    properties: {\r\n        buttonCard:cc.Button,\r\n        spriteFrameOns:{\r\n            default:[],   \r\n            type:cc.SpriteFrame,\r\n        },\r\n      // spriteFrameOff:cc.SpriteFrame,\r\n      //  spriteCard:cc.Sprite,\r\n/*\r\n        spriteFrameOff:{\r\n            get(){\r\n                return this._spriteFrameOff;\r\n            },\r\n            set(value){\r\n                this._spriteFrameOff = value;\r\n            }\r\n        },\r\n  */\r\n    },\r\n\r\n    start () {\r\n        this._spriteCard = this.buttonCard.getComponent(cc.Sprite);\r\n        this._spriteFrameOff = this._spriteCard.spriteFrame;\r\n    },\r\n\r\n    click(){\r\n        if(BaseCard.isLock){\r\n            return;\r\n        }else if(BaseCard.cardOpen === null){\r\n            BaseCard.cardOpen = this;\r\n        }else{\r\n            BaseCard.isLock = true;\r\n            this.node.runAction(\r\n                cc.sequence(\r\n                    cc.delayTime(TIME*5),\r\n                    cc.callFunc(\r\n                        function(){\r\n                            if(BaseCard.cardOpen.index === this.index){\r\n                                BaseCard.cardOpen.end();\r\n                                this.end();\r\n                            }else{\r\n                                BaseCard.cardOpen.close();\r\n                                this.close();\r\n                            }\r\n                            BaseCard.isLock = false;\r\n                            BaseCard.cardOpen = null;\r\n                        },\r\n                        this\r\n                    )\r\n                )\r\n            );\r\n        }\r\n        \r\n\r\n        this.buttonCard.interactable = false;\r\n        this.buttonCard.node.runAction(\r\n            cc.sequence(\r\n                cc.scaleTo(TIME,0,1),\r\n                cc.callFunc(\r\n                    function(){\r\n                        this._spriteCard.spriteFrame = this.spriteFrameOns[this.index];\r\n                    },\r\n                    this\r\n                ),\r\n                cc.scaleTo(TIME,1,1)\r\n            )\r\n            \r\n        );\r\n    },\r\n\r\n    open(){\r\n        this.buttonCard.node.runAction(\r\n            cc.sequence(\r\n                cc.scaleTo(TIME,0,1),\r\n                cc.callFunc(\r\n                    function(){\r\n                        this._spriteCard.spriteFrame = this.spriteFrameOns[this.index];\r\n                    },\r\n                    this\r\n                ),\r\n                cc.scaleTo(TIME,1,1),\r\n                cc.callFunc(\r\n                    function(){\r\n                        this.buttonCard.interactable = false;\r\n                    },\r\n                    this\r\n                )\r\n            )\r\n        );\r\n    },\r\n\r\n    close(){\r\n        this.buttonCard.node.runAction(\r\n            cc.sequence(\r\n                cc.scaleTo(TIME,0,1),\r\n                cc.callFunc(\r\n                    function(){\r\n                        this._spriteCard.spriteFrame = this._spriteFrameOff;\r\n                    },\r\n                    this\r\n                ),\r\n                cc.scaleTo(TIME,1,1),\r\n                cc.callFunc(\r\n                    function(){\r\n                        this.buttonCard.interactable = true;\r\n                    },\r\n                    this\r\n                )\r\n            )\r\n        );\r\n    },\r\n\r\n    end(){\r\n        this.node.runAction(\r\n            cc.sequence(\r\n                cc.fadeOut(TIME),\r\n                cc.callFunc(\r\n                    function(){\r\n                        this.node.destroy();\r\n                        this.callBackEnd();\r\n                    },\r\n                    this\r\n                )\r\n            )\r\n        );\r\n    },\r\n});\r\n"]}